<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [TransactionStateManager][1]
    -   [Parameters][2]
    -   [generateTxMeta][3]
        -   [Parameters][4]
    -   [getTxList][5]
    -   [getFullTxList][6]
    -   [getUnapprovedTxList][7]
    -   [getApprovedTransactions][8]
        -   [Parameters][9]
    -   [getPendingTransactions][10]
        -   [Parameters][11]
    -   [getConfirmedTransactions][12]
        -   [Parameters][13]
    -   [addTx][14]
        -   [Parameters][15]
    -   [getTx][16]
        -   [Parameters][17]
    -   [updateTx][18]
        -   [Parameters][19]
    -   [updateTxParams][20]
        -   [Parameters][21]
    -   [validateTxParams][22]
        -   [Parameters][23]
    -   [getFilteredTxList][24]
        -   [Parameters][25]
    -   [getTxsByMetaData][26]
        -   [Parameters][27]
    -   [subscribe][28]
        -   [Parameters][29]
    -   [getTxStatus][30]
        -   [Parameters][31]
    -   [setTxStatusRejected][32]
        -   [Parameters][33]
    -   [setTxStatusFailed][34]
        -   [Parameters][35]
    -   [wipeTransactions][36]
        -   [Parameters][37]
    -   [\_setTxStatus][38]
        -   [Parameters][39]
    -   [\_saveTxList][40]
        -   [Parameters][41]
-   [tx-state-history-helper][42]
-   [util][43]
    -   [Parameters][44]
-   [generateHistoryEntry][45]
    -   [Parameters][46]
-   [replayHistory][47]
    -   [Parameters][48]
-   [snapshotFromTxMeta][49]
    -   [Parameters][50]
    -   [Parameters][51]
-   [validateTxParams][52]
    -   [Parameters][53]
-   [validateFrom][54]
    -   [Parameters][55]
-   [validateRecipient][56]
    -   [Parameters][57]
-   [getFinalStates][58]

## TransactionStateManager

[index.js:43-451][59]

TransactionStateManager is responsible for the state of a transaction and
storing the transaction
it also has some convenience methods for finding subsets of transactions
and a `subscribe` method to subscribe

DEFAULT STATUS METHODS
<br>statuses:
<br>   - `'unapproved'` the user has not responded
<br>   - `'rejected'` the user has responded no!
<br>   - `'approved'` the user has approved the tx
<br>   - `'signed'` the tx is signed
<br>   - `'submitted'` the tx is sent to a server
<br>   - `'confirmed'` the tx has been included in a block.
<br>   - `'failed'` the tx failed for some reason, included on tx data.
<br>   - `'dropped'` the tx nonce was already used

### Parameters

-   `opts` **[Object][60]** {object}
    -   `opts.initState` **[object][60]** initial transactions list with the key transaction {array} (optional, default `{transactions:[]}`)
    -   `opts.txHistoryLimit` **[number][61]?** limit for how many finished
        transactions can hang around in state
    -   `opts.getNetwork` **[function][62]** return network number
    -   `opts.customStatusList`   (optional, default `STATUS_DEFAULTS`)

### generateTxMeta

[index.js:71-81][63]

#### Parameters

-   `opts`  {object} - the object to use when overwriting defaults

Returns **txMeta** the default txMeta object

### getTxList

[index.js:86-90][64]

Returns **[array][65]** of txMetas that have been filtered for only the current network

### getFullTxList

[index.js:95-97][66]

Returns **[array][65]** of all the txMetas in store

### getUnapprovedTxList

[index.js:102-108][67]

Returns **[array][65]** the tx list whos status is unapproved

### getApprovedTransactions

[index.js:115-119][68]

#### Parameters

-   `address`  {string} - hex prefixed address to sort the txMetas for [optional]

Returns **[array][65]** the tx list whos status is approved if no address is provide
returns all txMetas who's status is approved for the current network

### getPendingTransactions

[index.js:126-130][69]

#### Parameters

-   `address`  {string} - hex prefixed address to sort the txMetas for [optional]

Returns **[array][65]** the tx list whos status is submitted if no address is provide
returns all txMetas who's status is submitted for the current network

### getConfirmedTransactions

[index.js:137-141][70]

#### Parameters

-   `address`  {string} - hex prefixed address to sort the txMetas for [optional]

Returns **[array][65]** the tx list whos status is confirmed if no address is provide
returns all txMetas who's status is confirmed for the current network

### addTx

[index.js:152-180][71]

Adds the txMeta to the list of transactions in the store.
if the list is over txHistoryLimit it will remove a transaction that
is in its final state
it will allso add the key `history` to the txMeta with the snap shot of the original
object

#### Parameters

-   `txMeta`  {Object}

Returns **[object][60]** the txMeta

### getTx

[index.js:186-189][72]

#### Parameters

-   `txId`  {number}

Returns **[object][60]** the txMeta who matches the given id if none found
for the network returns undefined

### updateTx

[index.js:196-226][73]

updates the txMeta in the list and adds a history entry

#### Parameters

-   `txMeta`  {Object} - the txMeta to update
-   `note`  {string} - a note about the update for history

### updateTxParams

[index.js:235-239][74]

merges txParams obj onto txMeta.txParams
use extend to ensure that all fields are filled

#### Parameters

-   `txId`  {number} - the id of the txMeta
-   `txParams`  {object} - the updated txParams

### validateTxParams

[index.js:245-259][75]

validates txParams members by type

#### Parameters

-   `txParams`  {object} - txParams to validate

### getFilteredTxList

[index.js:287-293][76]

#### Parameters

-   `opts`  {object} -  an object of fields to search for eg:<br>
    let <code>thingsToLookFor = {<br>
    to: '0x0..',<br>
    from: '0x0..',<br>
    status: 'signed',<br>
    err: undefined,<br>
    }<br></code>
-   `initialList`   (optional, default `this.getTxList()`)

Returns **any** a {array} of txMeta with all
options matching

### getTxsByMetaData

[index.js:302-310][77]

#### Parameters

-   `key`  {string} - the key to check
-   `value`  the value your looking for
-   `txList`  {array} - the list to search. default is the txList
    from txStateManager#getTxList (optional, default `this.getTxList()`)

Returns **[array][65]** a list of txMetas who matches the search params

### subscribe

[index.js:319-347][78]

subscribe to status changes of a particular tx

#### Parameters

-   `txId`  {number} - the txMeta Id
-   `listener`  {function} - the listener
-   `status`  {string} - the desired status for the listener to be triggered. if undefined applies to all status changes and will be immediately triggered

Returns **[boolean][79]** weather the listener was applied. Returns false if tx does not exist

### getTxStatus

[index.js:355-358][80]

#### Parameters

-   `txId`  {number} - the txMeta Id

Returns **[string][81]** the status of the tx.

### setTxStatusRejected

[index.js:364-367][82]

should update the status of the tx to 'rejected'.

#### Parameters

-   `txId`  {number} - the txMeta Id

### setTxStatusFailed

[index.js:375-386][83]

should update the status of the tx to 'failed'.
and put the error on the txMeta

#### Parameters

-   `txId`  {number} - the txMeta Id
-   `err`  {erroObject} - error object

### wipeTransactions

[index.js:393-403][84]

Removes transaction from the given address for the current network
from the txList

#### Parameters

-   `address`  {string} - hex string of the from address on the txParams to remove

### \_setTxStatus

[index.js:426-435][85]

#### Parameters

-   `txId`  {number} - the txMeta Id
-   `status`  {string} - the status to set on the txMeta

### \_saveTxList

[index.js:442-444][86]

Saves the new/updated txList.

#### Parameters

-   `transactions`  {array} - the list of transactions to save

## tx-state-history-helper

[lib/tx-state-history-helper.js:4-9][87]

## util

[lib/util.js:9-15][88]

## 

[lib/tx-state-history-helper.js:4-9][87]

converts non-initial history entries into diffs

### Parameters

-   `longHistory`  {array}

Returns **[array][65]** 

## generateHistoryEntry

[lib/tx-state-history-helper.js:39-48][89]

Generates an array of history objects sense the previous state.
The object has the keys
op (the operation performed),
path (the key and if a nested object then each key will be seperated with a `/`)
value
with the first entry having the note and a timestamp when the change took place

### Parameters

-   `previousState`  {object} - the previous state of the object
-   `newState`  {object} - the update object
-   `note`  {string} - a optional note for the state change

Returns **[array][65]** 

## replayHistory

[lib/tx-state-history-helper.js:54-57][90]

Recovers previous txMeta state obj

### Parameters

-   `_shortHistory`  

Returns **[object][60]** 

## snapshotFromTxMeta

[lib/tx-state-history-helper.js:63-69][91]

### Parameters

-   `txMeta`  {Object}

Returns **[object][60]** a clone object of the txMeta with out history

## 

[lib/util.js:19-27][92]

normalizes txParams

### Parameters

-   `txParams`  {object}

Returns **[object][60]** normalized txParams

## validateTxParams

[lib/util.js:47-60][93]

validates txParams

### Parameters

-   `txParams`  {object}

## validateFrom

[lib/util.js:66-69][94]

validates the from field in  txParams

### Parameters

-   `txParams`  {object}

## validateRecipient

[lib/util.js:75-86][95]

validates the to field in  txParams

### Parameters

-   `txParams`  {object}

## getFinalStates

[lib/util.js:91-98][96]

Returns **any** an {array} of states that can be considered final

[1]: #transactionstatemanager

[2]: #parameters

[3]: #generatetxmeta

[4]: #parameters-1

[5]: #gettxlist

[6]: #getfulltxlist

[7]: #getunapprovedtxlist

[8]: #getapprovedtransactions

[9]: #parameters-2

[10]: #getpendingtransactions

[11]: #parameters-3

[12]: #getconfirmedtransactions

[13]: #parameters-4

[14]: #addtx

[15]: #parameters-5

[16]: #gettx

[17]: #parameters-6

[18]: #updatetx

[19]: #parameters-7

[20]: #updatetxparams

[21]: #parameters-8

[22]: #validatetxparams

[23]: #parameters-9

[24]: #getfilteredtxlist

[25]: #parameters-10

[26]: #gettxsbymetadata

[27]: #parameters-11

[28]: #subscribe

[29]: #parameters-12

[30]: #gettxstatus

[31]: #parameters-13

[32]: #settxstatusrejected

[33]: #parameters-14

[34]: #settxstatusfailed

[35]: #parameters-15

[36]: #wipetransactions

[37]: #parameters-16

[38]: #_settxstatus

[39]: #parameters-17

[40]: #_savetxlist

[41]: #parameters-18

[42]: #tx-state-history-helper

[43]: #util

[44]: #parameters-19

[45]: #generatehistoryentry

[46]: #parameters-20

[47]: #replayhistory

[48]: #parameters-21

[49]: #snapshotfromtxmeta

[50]: #parameters-22

[51]: #parameters-23

[52]: #validatetxparams-1

[53]: #parameters-24

[54]: #validatefrom

[55]: #parameters-25

[56]: #validaterecipient

[57]: #parameters-26

[58]: #getfinalstates

[59]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L43-L451 "Source code on GitHub"

[60]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[61]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[62]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[63]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L71-L81 "Source code on GitHub"

[64]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L86-L90 "Source code on GitHub"

[65]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[66]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L95-L97 "Source code on GitHub"

[67]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L102-L108 "Source code on GitHub"

[68]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L115-L119 "Source code on GitHub"

[69]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L126-L130 "Source code on GitHub"

[70]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L137-L141 "Source code on GitHub"

[71]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L152-L180 "Source code on GitHub"

[72]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L186-L189 "Source code on GitHub"

[73]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L196-L226 "Source code on GitHub"

[74]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L235-L239 "Source code on GitHub"

[75]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L245-L259 "Source code on GitHub"

[76]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L287-L293 "Source code on GitHub"

[77]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L302-L310 "Source code on GitHub"

[78]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L319-L347 "Source code on GitHub"

[79]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[80]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L355-L358 "Source code on GitHub"

[81]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[82]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L364-L367 "Source code on GitHub"

[83]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L375-L386 "Source code on GitHub"

[84]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L393-L403 "Source code on GitHub"

[85]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L426-L435 "Source code on GitHub"

[86]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/index.js#L442-L444 "Source code on GitHub"

[87]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/tx-state-history-helper.js#L4-L9 "Source code on GitHub"

[88]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/util.js#L9-L15 "Source code on GitHub"

[89]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/tx-state-history-helper.js#L39-L48 "Source code on GitHub"

[90]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/tx-state-history-helper.js#L54-L57 "Source code on GitHub"

[91]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/tx-state-history-helper.js#L63-L69 "Source code on GitHub"

[92]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/util.js#L19-L27 "Source code on GitHub"

[93]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/util.js#L47-L60 "Source code on GitHub"

[94]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/util.js#L66-L69 "Source code on GitHub"

[95]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/util.js#L75-L86 "Source code on GitHub"

[96]: https://github.com/MetaMask/transaction-state-manager/blob/02cd14a0685865351def605cd1d7ac2abfb5211f/lib/util.js#L91-L98 "Source code on GitHub"
